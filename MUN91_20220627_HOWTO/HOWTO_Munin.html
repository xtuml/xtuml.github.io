<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>HOWTO build and run the Munin project</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 15px; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.stretch { width: 100%; }

p.lead { font-size: 1.23333em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #777777; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #4183c4; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #4183c4; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.4; margin-bottom: 1em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.93333em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: bold; font-style: normal; color: #333333; text-rendering: optimizeLegibility; margin-top: 0.2em; margin-bottom: 0.5em; line-height: 1.2em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: gray; line-height: 0; }

h1 { font-size: 1.33333em; }

h2 { font-size: 0.93333em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 0.86667em; }

h4 { font-size: 0.66667em; }

h5 { font-size: 1em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.33333em 0 1.26667em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Monaco, "DejaVu Sans Mono", "Courier New", monospace; font-weight: normal; color: #666666; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.4; margin-bottom: 1em; list-style-position: outside; font-family: helvetica, arial, freesans, clean, sans-serif; }

ul, ol { margin-left: 0.7em; }
ul.no-bullet, ol.no-bullet { margin-left: 0.7em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.33333em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.33333em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.33333em; font-weight: bold; }
dl dd { margin-bottom: 1.33333em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #333333; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1em; padding: 0; border-left: none; }
blockquote cite { display: block; font-size: 0.86667em; color: #666666; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #666666; }

blockquote, blockquote p { line-height: 1.4; color: #666666; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.33333em 0; border: 1px solid #dddddd; padding: 0.66667em 0.8em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 1em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.06667em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2em; }
  h2 { font-size: 1.6em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.2em; }
  h4 { font-size: 1em; } }
/* Tables */
table { background: white; margin-bottom: 1.33333em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.53333em 0.66667em 0.66667em; font-size: 0.93333em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.6em 0.66667em; font-size: 0.8em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

:not(pre):not([class^=L]) > code { font-size: 0.86667em; font-style: normal !important; letter-spacing: 0; padding: 1px 5px 1px 5px; background-color: transparent; border: 1px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; line-height: inherit; word-wrap: break-word; }

:not(pre) > code.nobreak { word-wrap: normal; }
:not(pre) > code.nowrap { white-space: nowrap; }

pre { color: white; font-family: Consolas, "Liberation Mono", Courier, monospace; line-height: 1.6; }
pre code, pre pre { color: inherit; font-size: inherit; line-height: inherit; }
pre > code { display: block; }

pre.nowrap, pre.nowrap pre { white-space: pre; word-wrap: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #666666; }

kbd { font-family: Monaco, "DejaVu Sans Mono", "Courier New", monospace; display: inline-block; color: #333333; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 66.66667em; *zoom: 1; position: relative; padding-left: 1em; padding-right: 1em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #333333; font-weight: 300; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #666666; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #666666; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #666666; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #333333; font-weight: 300; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.13333em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: helvetica, arial, freesans, clean, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #777777; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background: white; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.06667em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.33333em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background: whitesmoke; padding: 1.33333em; }

#footer-text { color: #333333; line-height: 1.26; }

#content { margin-bottom: 0.66667em; }

.sect1 { padding-bottom: 0.66667em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.33333em; }
  .sect1 { padding-bottom: 1.33333em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #333333; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262626; }

details > summary:first-of-type { display: list-item; cursor: pointer; margin-bottom: 1.33333em; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.33333em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock.fit-content > caption.title { white-space: nowrap; width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: 1.23333em; line-height: 1.6; color: #333333; }

table.tableblock #preamble > .sectionbody > [class="paragraph"]:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: helvetica, arial, freesans, clean, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.2em; padding-right: 1.33333em; border-left: 1px solid #dddddd; color: #666666; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.33333em; padding: 1.33333em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0e0; margin-bottom: 1.33333em; padding: 1.33333em; background: #fafafa; -webkit-border-radius: 3px; border-radius: 3px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #777777; margin-top: 0; border-width: 0 0 1px 0; border-style: solid; border-color: #cacaca; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock > .content > pre { border: 2px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; word-wrap: break-word; overflow-x: auto; padding: 0.66667em; font-size: 0.86667em; }
@media only screen and (min-width: 768px) { .literalblock pre, .listingblock > .content > pre { font-size: 0.96667em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .listingblock > .content > pre { font-size: 1.06667em; } }

.literalblock.output pre { color: #333333; background-color: white; }

.listingblock > .content > pre:not(.highlight), .listingblock > .content > pre[class="highlight"], .listingblock > .content > pre[class^="highlight "] { background: #333333; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.8em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: inherit; opacity: 0.5; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: inherit; opacity: 0.5; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.66667em; -webkit-border-radius: 3px; border-radius: 3px; }

.prettyprint { background: #333333; }

pre.prettyprint .linenums { line-height: 1.6; margin-left: 2em; }

pre.prettyprint li { background: none; list-style-type: inherit; padding-left: 0; }

pre.prettyprint li code[data-lang]:before { opacity: 1; }

pre.prettyprint li:not(:first-child) code[data-lang]:before { display: none; }

table.linenotable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }
table.linenotable td[class] { color: inherit; vertical-align: top; padding: 0; line-height: inherit; white-space: normal; }
table.linenotable td.code { padding-left: 0.75em; }
table.linenotable td.linenos { border-right: 1px solid currentColor; opacity: 0.35; padding-right: 0.5em; }

pre.pygments .lineno { border-right: 1px solid currentColor; opacity: 0.35; display: inline-block; margin-right: 0.75em; }
pre.pygments .lineno:before { content: ""; margin-right: -0.125em; }

.quoteblock { margin: 0 1em 1em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock p { color: #666666; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #777777; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.75em; margin-right: 0.5ex; text-align: right; }

.verseblock { margin: 0 1em 1em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #666666; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.86667em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #666666; }

.quoteblock.abstract blockquote:before, .quoteblock.excerpt blockquote:before, .quoteblock .quoteblock blockquote:before { display: none; }
.quoteblock.abstract blockquote, .quoteblock.abstract p, .quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { line-height: 1.6; word-spacing: 0; }
.quoteblock.abstract { margin: 0 1em 1em 1em; display: block; }
.quoteblock.abstract > .title { margin: 0 0 0.375em 0; font-size: 1.15em; text-align: center; }
.quoteblock.excerpt, .quoteblock .quoteblock { margin: 0 0 1em 0; padding: 0 0 0.25em 1em; border-left: 0.25em solid #dddddd; }
.quoteblock.excerpt blockquote, .quoteblock.excerpt p, .quoteblock .quoteblock blockquote, .quoteblock .quoteblock p { color: inherit; font-size: 1.0625rem; }
.quoteblock.excerpt .attribution, .quoteblock .quoteblock .attribution { color: inherit; text-align: left; margin-right: 0; }

table.tableblock { max-width: 100%; border-collapse: separate; }

p.tableblock:last-child { margin-bottom: 0; }

td.tableblock > .content { margin-bottom: -1em; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot, table.frame-ends { border-width: 1px 0; }

table.stripes-all tr, table.stripes-odd tr:nth-of-type(odd), table.stripes-even tr:nth-of-type(even), table.stripes-hover tr:hover { background: #f9f9f9; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

ol { margin-left: 0.96667em; }

ul li ol { margin-left: 0.7em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.5em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.66667em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.5em -1em; }

ul.inline > li { margin-left: 1em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.66667em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist td:not([class]):first-child { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist td:not([class]):first-child img { max-width: none; }
.colist td:not([class]):last-child { padding: 0.26667em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left { margin: 0.26667em 0.66667em 1.33333em 0; }
.imageblock.right { margin: 0.26667em 0 1.33333em 0.66667em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.13333em; }

.image.left, .image.right { margin-top: 0.26667em; margin-bottom: 0.26667em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.66667em; }
.image.right { margin-left: 0.66667em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.93333em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.8em; padding-bottom: 0.8em; margin-bottom: 0.66667em; }
#footnotes hr { width: 20%; min-width: 6.66667em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.93333em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.66667em; margin-bottom: 0; padding: 0.8em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #2e6295; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #333333; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

p.lead { font-size: 1em; color: #666666; }

h2 { color: #325D72; border-bottom: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { color: #333333; }

#header, #content, #footnotes { max-width: 70% !important; padding-left: 0; padding-right: 0; }

#content ul { list-style-type: none; }
#content ul li { background: url('../../img/themes/github/li-chevron.png?1459601949') 0 0.4em no-repeat; padding-left: .7em; }

.olist.procedure > ol { counter-reset: li; list-style: none; position: relative; }
.olist.procedure > ol > li { position: relative; padding: 5px 0 5px 55px; margin-bottom: 5px; }
.olist.procedure > ol > li:before { content: counter(li); counter-increment: li; position: absolute; top: 0; left: 0; height: 100%; width: 30px; padding: 0 10px 0 0; color: #999; font-size: 1.46667em; font-weight: bold; line-height: 1.6; text-align: right; border-right: 1px solid #ddd; }

.quoteblock blockquote { background: url('../../img/themes/github/blockquote-arrow.png?1459601949') 0 2px no-repeat; padding-left: 1em; }

.sidebarblock > .content > .title { margin-top: -20px; margin-right: -20px; margin-left: -20px; margin-bottom: 20px; padding: 1em; font-size: 0.8em; background: #eaeaea; }

.literalblock pre, .listingblock pre { background: #333333; }

</style>
</head>
<body class="article">
<div id="header">
<h1>HOWTO build and run the Munin project</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Enough talk! <a href="#_export_masl">Skip to the steps</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you get started, take a few moments to be sure you have the following
pieces in place.</p>
</div>
<div class="sect2">
<h3 id="_docker">Docker</h3>
<div class="paragraph">
<p>If you plan to build and run the models, Docker is required for these processes.
Docker is a containerisation tool which can be used to produce an application
image that can be executed consistently on any platform which supports the
docker engine.</p>
</div>
<div class="paragraph">
<p>Two Docker terms you should be familiar with before you get started are "image"
and "container". An image is the blueprint for a container. It represents the
initial state of the filesystem when a container is created and carries metadata
about the image and the execution of the containerised application. You can
think of a container as an instance of an image. A container is created from an
image when the user requests it to run. Many containers can be created from the
same image simultaneously and are isolated from one another. Even after the
process inside the container exits, the container still exists and its state can
be interrogated until it is deleted by the user.</p>
</div>
<div class="paragraph">
<p>Follow the instructions here to install
<a href="https://docs.docker.com/get-docker/">Docker Desktop</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bridgepoint">BridgePoint</h3>
<div class="paragraph">
<p>Install the latest BridgePoint release. If you already have BridgePoint
installed, confirm that your version is more recent than 7.1.0
(2022-06-23 14:15 EDT) by checking the build ID.</p>
</div>
<div class="paragraph">
<p>Refer to
<a href="https://github.com/xtuml/bridgepoint/blob/master/doc-bridgepoint/process/HOWTO-install-bridgepoint.adoc">this guide</a>
for help installing BridgePoint and checking the build ID.</p>
</div>
</div>
<div class="sect2">
<h3 id="_git">Git</h3>
<div class="paragraph">
<p>BridgePoint comes packaged with everything you need to interact with the source
git repositories. That being said, some prefer to use a different GUI client
application or use the command line version of the tool.</p>
</div>
<div class="paragraph">
<p>Refer to
<a href="https://github.com/xtuml/bridgepoint/blob/master/doc-bridgepoint/process/HOWTO-use-git.adoc">this guide</a>
for a quick start on using git to clone repositories and import projects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_projects">Source Projects</h3>
<div class="paragraph">
<p>It is necessary to have the source code/models downloaded onto your machine. The
source code can be <a href="https://github.com/xtuml/tower">browsed on GitHub</a>.
Follow the steps from the guide linked in the previous section to clone this
repository from GitHub. Follow the steps from the guide linked in the
<a href="#_bridgepoint">BridgePoint</a> section to import the following projects into a fresh
workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AEOrdering</p>
</li>
<li>
<p>AER_AEO_SVDC</p>
</li>
<li>
<p>AEReception</p>
</li>
<li>
<p>AESimulator</p>
</li>
<li>
<p>SequenceVerificationDataCentric</p>
</li>
<li>
<p>utils</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_terminology">Terminology</h3>
<div class="sect3">
<h4 id="_project">Project</h4>
<div class="paragraph">
<p>The term "project" typically refers to the model source and supporting
build/configuration files for a single unit of functionality. In our context,
this also maps one-to-one with an Eclipse/BridgePoint project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_domain">Domain</h4>
<div class="paragraph">
<p>A "domain" represents an encapsulated set of data objects and behaviours. The
term comes from the original Shlaer-Mellor method, and in MASL a domain is the
basic unit of compilation. Each domain exists in its own project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment">Deployment</h4>
<div class="paragraph">
<p>A "deployment" represents a configuration of one or more domains including the
modelled connections between them. Deployments map to "project" in textual MASL
form, but the term "deployment" is preferred to avoid confusion with the more
general term "project".</p>
</div>
</div>
<div class="sect3">
<h4 id="_integration_project">Integration project</h4>
<div class="paragraph">
<p>"Integration project" is an informal term and in our contexts it refers to the
BridgePoint project where all of the domains are integrated together using a
deployment. In our context this is synonymous with the "AER_AEO_SVDC" project.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_toolchain">Toolchain</h3>
<div class="paragraph">
<p>The Munin project team has been using the Shlaer-Mellor Method to model the
problem and our solution. The following sections describe the set of tools we
are using to actualise our designs.</p>
</div>
<div class="sect3">
<h4 id="_xtumlbridgepoint">xtUML/BridgePoint</h4>
<div class="paragraph">
<p>The source models are represented graphically in xtUML using the BridgePoint
editor. Action semantics are encoded using MASL. The MASL specification also
defines all necessary "structural" constructs (e.g. classes, relationships,
state machines), but does not provide a
specification for capturing graphical layout. In addition, there is no existing
graphical tool which supports direct edit of MASL models. BridgePoint provides
the graphical editing experience required for structural Shlaer-Mellor modelling.</p>
</div>
</div>
<div class="sect3">
<h4 id="_masl">MASL</h4>
<div class="paragraph">
<p>At build time, BridgePoint is used to export the xtUML models to textual MASL
format. As mentioned in the previous section, MASL is capable of representing
the complete semantics of the S-M method including structural elements. In
addition, MASL is required to be compatible with our selected backend code
generator (see next section).</p>
</div>
</div>
<div class="sect3">
<h4 id="_masl_c_code_generator_and_software_architecture_via_docker">MASL C++ code generator and software architecture (via Docker)</h4>
<div class="paragraph">
<p>The code generator and target architecture chosen for Munin Phase 1 is the MASL
C software architecture published as Open Source Software in 2016. The code
generator consists of a Java-based MASL parser/generator which produces C
source code for an application model. The code generator is designed to be
modular with a core translator and a set of peripheral translators that provide
additional capabilities such as Sqlite persistence, build file generation,
runtime model debugging, etc. The companion software architecture is a set of
runtime libraries written in C++ which provide mechanisms to implement the rules
of Shlaer-Mellor in a single threaded process. The code generator is designed
to produce generated code compatible with the runtime architecture.</p>
</div>
<details>
<summary class="title">Click for more details</summary>
<div class="content">
<div class="paragraph">
<p>Since it was published in 2016, the MASL C++ project has been hosted
<a href="https://github.com/xtuml/masl">on GitHub</a> and managed by the xtUML
community. However, in the period since being published, the project has seen
little maintenance activity and has fallen behind the upstream version. As a
result, build tool and third party library dependencies have locked this
architecture in time. We have created a set of container images using Docker to
encapsulate the code generator and runtime libraries. This allows us to build
and execute models in two primary modes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the first mode, the project source MASL is passed into a container via a
shared folder where the code generator and C compiler are free to execute in
the context of all required dependencies. The generated C source code,
compiled libraries, executables, and supporting files are passed back out to the
development host machine using the same shared folder mechanism. Once compiled,
the binary file can be executed using another container image which provides all
necessary runtime shared libraries (MASL architecture and third party). This
mode of execution can be thought of as analogous to executing Java byte code in
an instance of the JVM.</p>
</li>
<li>
<p>In the second mode, an alternative Docker image is created by extending a base
image that already contains all of the MASL dependencies. The code is generated
and compiled during the image build phase and the resultant executable is set up
as the entrypoint for the image. Once the image is produced, it can be executed
on any platform that supports the docker engine.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The first mode is more flexible, better for iterative development, and results
in much smaller generated artefacts. The second mode is less error prone and is
more suited for deployment. We used the first mode primarily during the PoC and
have since switched to the second mode in anticipation of deployment and
scaling.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_testing_and_github_actions_continuous_integration">Testing and GitHub Actions (Continuous Integration)</h4>
<div class="paragraph">
<p>We are using features of the MASL code generator along with custom domains to
define and run tests for each domain and the whole system. A domain service is
created for each test. Test services are specially marked to be excluded from
the production application and are added to a test schedule. When the project is
built in the testing configuration, the tests are generated and executed and
results are logged to the console and output as a set of JSON files.</p>
</div>
<div class="paragraph">
<p>We are using GitHub Actions to automatically build and run tests for each domain
and the system deployment any time new code is merged into the main development
branch of the repository. The output from each test schedule is consolidated and
formatted into an HTML report. The most recent report from the main branch can
be viewed <a href="https://s3.amazonaws.com/1f-outgoing/munin/main/index.html">here</a>.
New failures or build issues are flagged before code is merged into the
mainline.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_domain_overview">Domain overview</h3>
<div class="sect3">
<h4 id="_reception">Reception</h4>
<div class="paragraph">
<p>The role of the Audit Event Reception domain is to convert audit events received
from the monitored system, in whatever form they arrive, into audit event
objects that can be used by the other domains in the model. Any changes to the
format of received audit events will be addressed by the Audit Event Reception
domain. The format of delivery to the other domains will remain consistent. This
isolates the impact of changes in received audit event format to a single
domain. Unexpected input formats are rejected and errors are notified.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ordering">Ordering</h4>
<div class="paragraph">
<p>The role of the Audit Event Ordering domain is two-fold. It validates the source
of the received audit event in terms of Node and Application, and it constructs
the audit event sequence into the correct order as determined by the previous
event ID in each Audit Event. Once the audit events have been correctly ordered
they are delivered to the Sequence Verification domain. Events from unexpected
sources are rejected and errors are notified. Audit Event Ordering waits for out
of sequence events to arrive for a defined period of time. Gaps in event
sequences not resolved within the defined time period are denoted as a failure
of the Job and the error condition is notified.</p>
</div>
<div class="paragraph">
<p>Another role of Audit Event Ordering is to read a configuration file at
initialisation, to use that data to set up its own definition classes, and to
forward that configuration information to Sequence Verification to set up its
definition classes. This approach ensures that the definition classes of Audit
Event Ordering and Sequence Verification are aligned.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sequence_verification">Sequence Verification</h4>
<div class="paragraph">
<p>The role of the Sequence Verification domain is to verify that the audit events
received are in a correct, expected order taking account of support for repeated
audit event types and forks, parallel branches and merges in the event
sequences. A Job is only deemed complete when all sequences within the Job have
completed. The Sequence Verification domain is built to detect and report a
number of error conditions in the received Audit Event data. These error
conditions include unexpected audit event types, unexpected sequences of audit
event types, sequences starting with the wrong audit event types and repetition
of audit event types in unexpected places.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_running_the_project">Building and Running the Project</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_build_overview">Build Overview</h3>
<div class="paragraph">
<p>For a visual overview of the build process, refer to these
<a href="images/build_process.pdf">slides</a>.</p>
</div>
<div class="paragraph">
<p>As mentioned in the section discussing the toolchain, there are three major
steps to building and running the projects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Export MASL</p>
</li>
<li>
<p>Build with Docker</p>
</li>
<li>
<p>Launch with Docker</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Before getting into the actual build, it is often an instructive process to
go through the project structure file by file and explore the purpose of each
file in the context of the build. We will use the <code>AEReception</code> domain for this.
Each of the other domains follows a similar pattern. Not every file/directory
seen here will exist in each domain project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Some files are marked by git as "ignored" these tend to be generated
byproducts of the build that should not be committed to the repository (e.g.
build logs, test results). Not every one of these files will be covered in the
section below, but it is good to be aware of them.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre> AEReception/
   config/
   gen/
     AEJSON_OOA/
      application.mark
      features.mark
      README.adoc
   masl/
   models/
   schedule/
   test_results/
   testing/
    CMakeLists.txt
    docker-compose.test.yml
    docker-compose.yml
    Dockerfile</pre>
</div>
</div>
<div class="sect3">
<h4 id="_config"><code>config</code></h4>
<div class="paragraph">
<p>The <code>config</code> directory contains plaintext files used by the application itself
to configure the domain. The application is passed a config file as a command
line argument, which it parses and uses to set up the initial instance
population.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gen"><code>gen/</code></h4>
<div class="paragraph">
<p>The <code>gen</code> directory contains files used during the process of code generation
and build. The <code>AEJSON_OOA/</code> subdirectory contains a handwritten C++ utility
domain used by the main <code>AEReception</code> domain to parse the JSON input files.
<code>features.mark</code> and <code>application.mark</code> contain model compiler "marks". These
metadata are associated with particular application model elements and act as directives
to the compiler. For example, domain services used exclusively for testing are
marked as <code>test_only</code>, and the architecture will exclude them from generation
during a production build.</p>
</div>
</div>
<div class="sect3">
<h4 id="_masl_2"><code>masl/</code></h4>
<div class="paragraph">
<p>The <code>masl</code> directory is the output location for exported MASL text. When the
project is clean, this directory is empty. The files in this directory are
generated and should not be hand edited.</p>
</div>
</div>
<div class="sect3">
<h4 id="_models"><code>models/</code></h4>
<div class="paragraph">
<p>The <code>models</code> directory is where BridgePoint stores xtUML source model files. The
files in this directory are managed by BridgePoint and should not be hand
edited.</p>
</div>
</div>
<div class="sect3">
<h4 id="_schedule"><code>schedule/</code></h4>
<div class="paragraph">
<p>The <code>schedule</code> directory contains plaintext files used by the architecture for
startup and testing. The MASL C++ platform provides a mechanism to run domain
services externally using a schedule file. This mechanism is particularly useful
for setting up execution of a particular set of tests, however it can also be
leveraged to determine which services will run at different stages of
initialisation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_test_results"><code>test_results/</code></h4>
<div class="paragraph">
<p>The <code>test_results</code> directory is created during a test execution and contains
JSON files containing the results and details of executed tests. This directory
is created by the execution of the unit tests. The files should not be hand
edited and this directory may not exist before a run.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing"><code>testing/</code></h4>
<div class="paragraph">
<p>The <code>testing</code> directory contains test files used in the unit tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cmakelists_txt"><code>CMakeLists.txt</code></h4>
<div class="paragraph">
<p>The <code>CMakeLists.txt</code> file is the top-level build file for the C++ build after
code generation is complete. It sets up link paths, include directories and
other global properties for the build. The behaviour of the build is different
depending on whether or not the build is launched in <code>Debug</code> (test) mode.</p>
</div>
</div>
<div class="sect3">
<h4 id="_docker_compose_yml_and_docker_compose_test_yml"><code>docker-compose.yml</code> and <code>docker-compose.test.yml</code></h4>
<div class="paragraph">
<p>The two <code>docker-compose*.yml</code> files are used to configure the build and
execution using Docker. The build target and parameters are configured, internet
ports and shared volumes are set up between host and container, and the command
line arguments are defined for the process. Any <code>docker compose &#8230;&#8203;</code> commands
will reference <code>docker-compose.yml</code> by default, however the config file can be
altered by passing the name of the new file with <code>-f</code>. You will notice in the
rest of this document that any time the test build is being run, the command
will start with <code>docker compose -f docker-compose.test.yml &#8230;&#8203;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dockerfile"><code>Dockerfile</code></h4>
<div class="paragraph">
<p>The <code>Dockerfile</code> file defines the actual build. The file uses Docker&#8217;s
multi-stage build capability which allows the file to define two separate builds&#8201;&#8212;&#8201;one for testing and one for release. The testing version of the image
executes the code generator in test mode which will cause it to generate code
for the <code>test_only</code> services as well as additional scaffolding for testing
interfaces.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
I encourage you to take a moment before moving on to open each of these
files in a text editor (you can double click them from the "Project Explorer"
within BridgePoint) and briefly explore their contents.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_export_masl">Export MASL</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up BridgePoint. Assure that you have all six of the source projects
imported into your workspace.</p>
<div class="paragraph">
<p>See the <a href="#_source_projects">list of projects</a>.</p>
</div>
</li>
<li>
<p>To export MASL, select each project and click the
<a href="images/01_hammer.png">hammer icon</a> found in the tool ribbon at the top of
the screen.</p>
</li>
<li>
<p>Alternatively you can right click each project and select
<a href="images/02_build_project.png">"Build Project"</a> from the context menu.</p>
</li>
<li>
<p>If you wish to export MASL for all projects at once, you can click
<a href="images/03_build_all.png">"Build All"</a> from the "Project" menu in the
application bar at the top of the application or use the <code>Ctrl-B</code>/<code>Cmd-B</code>
keyboard shortcut.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>utils</code> project simply contains common MASL interfaces and need not be
built. In fact, it will not even show up in the xtUML Modelling perspective.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_build_each_domain">Build each domain</h3>
<div class="paragraph">
<p>This should be repeated for each of the three application domains and the
simulator domain. For the sake of demonstration, the following instructions will
reference the <code>AEReception</code> domain. Additionally, the instructions will assume
that the code has been cloned in a standard location (<code>~/git/tower</code> on Linux/Mac
and <code>C:\git\tower</code> on Windows).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a shell and navigate to the <code>AEReception</code> project directory:</p>
<div class="literalblock">
<div class="content">
<pre>cd ~/git/tower/models/AEReception   # linux/mac
cd C:\git\tower\models\AEReception  # windows</pre>
</div>
</div>
</li>
<li>
<p>Build the project with Docker by running the following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose build --no-cache</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>--no-cache</code> flag tells Docker to rebuild the image even if it has
been built before and exists in cache. This is not strictly necessary, but it
provides confidence that the latest code is being used for the build.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The first invocation of <code>docker compose build &#8230;&#8203;</code> will cause Docker to
download the base MASL image from Docker Hub. This image is &gt; 600 MB and
therefore will take some time to download. Subsequent builds will not require
this download.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Repeat this step for the other three domains:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>AEOrdering</p>
</li>
<li>
<p>AESimulator</p>
</li>
<li>
<p>SequenceVerificationDataCentric</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_build_integration_project">Build integration project</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Before this step, all three of the application domains and the
simulator domain must be built as demonstrated in the previous step.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In your shell, navigate to the integration project directory:</p>
<div class="literalblock">
<div class="content">
<pre>cd ~/git/tower/models/AER_AEO_SVDC   # linux/mac
cd C:\git\tower\models\AER_AEO_SVDC  # windows</pre>
</div>
</div>
</li>
<li>
<p>Build the project with Docker by running the following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose build --no-cache</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_integration_project">Running the integration project</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a shell in the integration project directory, run the following command
to launch the process:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose up</pre>
</div>
</div>
<div class="paragraph">
<p>You should see some logs begin to appear, in particular a periodic log from the
<code>AEReception</code> domain that it is waiting on input files.</p>
</div>
</li>
<li>
<p>Open a file explorer and navigate to the <code>models/test-files/processed/</code>
directory within the repository. This can be done through your OS GUI or quickly
through a simple command:</p>
<div class="literalblock">
<div class="content">
<pre>open -a Finder ~/git/tower/models/test-files/processed/  # mac
xdg-open ~/git/tower/models/test-files/processed/        # linux
explorer C:\git\tower\models\test-files\processed\       # windows</pre>
</div>
</div>
</li>
<li>
<p>Open another file explorer window and navigate to the
<code>models/test-files/incoming/</code> directory within the repository:</p>
<div class="literalblock">
<div class="content">
<pre>open -a Finder ~/git/tower/models/test-files/incoming/  # mac
xdg-open ~/git/tower/models/test-files/incoming/        # linux
explorer C:\git\tower\models\test-files\incoming\       # windows</pre>
</div>
</div>
</li>
<li>
<p><a href="images/04_drag_and_drop.gif">Drag and drop</a> <code>PoC_CBC_Test1.json</code> from the
<code>processed/</code> directory to the <code>incoming/</code> directory. You will see a flurry of
output from the application and the file will reappear in the <code>processed/</code>
directory. Inspect the logs and you will see that the audit events have been
received, ordered, and verified by the application.</p>
</li>
<li>
<p>Kill the process by pressing <code>Ctrl-C</code>. Clean up the process by running the
following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose down</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_troubleshooting_docker">Troubleshooting Docker</h4>
<div class="paragraph">
<p>Docker is a great tool for standardising builds and deployments, however it
presents some pitfalls when being used as a local build/development tool.</p>
</div>
<div class="paragraph">
<p>Docker Compose requires the "down" command to be issued even after all the
processes launched by the "up" command have terminated. This is because though
the process inside each container has exited, the container itself still exists
and can be restarted. As long as the container exists (whether running or
stopped), it will hold onto resources such as shared volumes and internet ports.
The "down" command tells Docker Compose to remove all the containers associated
with the launch.</p>
</div>
<div class="paragraph">
<p>If you see the message "port is already allocated", it is likely that you forgot
to run the <code>docker compose down</code> command somewhere along the way. When you run
this command, make sure it matches the "up" command (e.g. if you run <code>docker
compose -f docker-compose.test.yml up</code> to start the application, you should run
<code>docker compose -f docker-compose.test.yml down</code> in the same directory to tear
it down.)</p>
</div>
<div class="paragraph">
<p>If there is only one command to remember from this section, it is this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker system prune</pre>
</div>
</div>
<div class="paragraph">
<p>This command causes Docker to remove all stopped containers, networks, dangling
images and build cache. This usually works to give a "fresh" start if you get
stuck.</p>
</div>
<div class="paragraph">
<p>If you are making changes but not observing different behavior check the
following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Assure you have re-exported MASL (build projects from within BridgePoint)</p>
</li>
<li>
<p>Run the build again with caching disabled: <code>docker compose build --no-cache</code></p>
</li>
<li>
<p>Run the "up" command with the <code>--force-recreate</code> flag: <code>docker compose up
--force-recreate</code> (this flag forces existing containers to be replaced with new
ones created from the latest image).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_integration_project_with_the_audit_event_simulator">Running the integration project with the audit event simulator</h3>
<div class="paragraph">
<p>In the last section, we built and ran the integration project interactively with
test files. The audit event simulator can also be used to generate test audit
event files to be consumed by the main process. This section will also walk
through using the process inspector to attach to the running process and browse
the instance population.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a shell in the integration project directory, run the following command
to launch the process with the simulator:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml up</pre>
</div>
</div>
<div class="paragraph">
<p>You will see a lot of output at once. If you look closely, you can see several
logs showing the simulator emitting audit events, followed by the main application
handling those audit events.</p>
</div>
</li>
<li>
<p>In a new shell tab/window, run the following command to launch Inspector:</p>
<div class="literalblock">
<div class="content">
<pre>java -jar ~/git/tower/bin/inspector-1.0.0-jar-with-dependencies.jar   # linux/mac
java -jar C:\git\tower\bin\inspector-1.0.0-jar-with-dependencies.jar  # windows</pre>
</div>
</div>
</li>
<li>
<p>Select "AESequenceDC" from the <a href="images/05_domain_select.png">"Domain" drop-down menu</a></p>
</li>
<li>
<p>Double-click the <a href="images/06_job_population.png">"Job" item</a> in the object
list. Note that each line represents an instance of "Job" and each column
represents an attribute of the object.</p>
</li>
<li>
<p>Take some time to explore the rest of the instance population in Inspector</p>
</li>
<li>
<p>Exit inspector. Kill the application process by pressing <code>Ctrl-C</code> in the shell
window where it was launched. Clean up the process by running the following
command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml down</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_configuring_the_integration_project">Configuring the integration project</h4>
<div class="paragraph">
<p>There are two configuration files that are loaded at start up and checked on a
regular basis for updates:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>aereception_spec.txt
aeordering_spec.txt</pre>
</div>
</div>
<details>
<summary class="title">Click to see more details on the config file format</summary>
<div class="content">
<div class="paragraph">
<p>These configuration files contain some items that may be adjusted to manage the
digital twin. The following is a list of the configuration items that can be
adjusted and there description are as follows:</p>
</div>
<div class="paragraph">
<p><code>aereception_spec.txt</code>:</p>
</div>
<div class="paragraph">
<p><strong>EventThrottleRate</strong> - The rate that events should be processed from one
reception file specified as a duration. Once an event has been processed a timer
shall be set to the throttle rate and the timer shall have to expire before
another event is selected for processing.</p>
</div>
<div class="paragraph">
<p><strong>ReceptionDeletionTime</strong> - When a file has been through reception the details of
the reception processing shall be stored until this time expires.</p>
</div>
<div class="paragraph">
<p><strong>ConcurrentReceptionLimit</strong> - A number that indicates the limit of concurrent
reception jobs that can be executing, e.g. 1 = one active reception job</p>
</div>
<div class="paragraph">
<p><code>aeordering_spec.txt</code>:</p>
</div>
<div class="paragraph">
<p><strong>MaxOutOfSequenceEvents</strong> - This is the consecutive maximum out of sequence
events that can be received for a job before an error is declared.</p>
</div>
<div class="paragraph">
<p><strong>MaximumJobTime</strong> - This is the maximum time it should take for a job to be
finished. When this time has been reached after the job was started it shall be
archived if there are no blocked events or failed if there are blocked events.</p>
</div>
<div class="paragraph">
<p><strong>JobCompletePeriod</strong> - When a Job has completed it shall be either archived or
failed and once the job complete period has expired it shall be deleted from the
domain with all associated events.</p>
</div>
</div>
</details>
</div>
<div class="sect3">
<h4 id="_configuring_the_simulator">Configuring the simulator</h4>
<div class="paragraph">
<p>It is possible to configure the simulator to generate jobs that are to be
delivered to the digital twin. The configuration file it loads is defined in the
command specified in the <code>docker-compose-test.yml</code> and passed on the
<code>-test-config</code> argument as shown here:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>command: "-test-config config/test1config.txt -postinit schedule/startup.sch -util MetaData"</pre>
</div>
</div>
<details>
<summary class="title">Click to see more details on the config file format</summary>
<div class="content">
<div class="paragraph">
<p>The configuration file allows the user to define the test to be executed. Below
is a sample of a test from the configuration file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>TestId=1
TotalTests=2
TestFrequency=PT0S
GenerateEventFiles=true
TestFileLocation=test-files/generated
TestFileDestination=test-files/incoming
Job
JobSpecName=EndToEndOrderedJob
EventDefinition
EventName=1,HighInput,export assure aka input,export_assurer-8f309f67-2949-4071-b8c2-fd599b42cb0d,PT0S,true,
EventName=2,SignerReadTokenRequest,signer,signer-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,1
EventName=3,SignerParsedEvidence,signer,signer-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,2
EventName=4,SenderReceiveTokens,sender,sender-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,3
EventName=5,SenderPartRead,sender,sender-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,4
EventName=6,SenderProcessedRequest,sender,sender-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,5
EventName=7,SenderWritePayload,sender,sender-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,6
EventName=8,GatewayReadPayload,gateway dispatch,gateway-0a030a72-1c3b-4923-a32e-c553c08381c4,PT0S,false,7
EventName=9,GatewayWritePayload,gateway dispatch,gateway-0a030a72-1c3b-4923-a32e-c553c08381c4,PT0S,false,8
EventName=10,DiodeProcessPayload,diode,gateway-0a030a72-1c3b-4923-a32e-c553c08381c4,PT0S,false,9
EventName=11,DiodeWritePayload,diode,gateway-0a030a72-1c3b-4923-a32e-c553c08381c4,PT0S,false,10
EventName=12,LowInput,low,import_assurer-bcc34e5f-8b4b-4665-ad1d-d853948a2b9e,PT0S,false,</pre>
</div>
</div>
<div class="paragraph">
<p>The following provides an explanation to each of the lines in the configuration
file:</p>
</div>
<div class="paragraph">
<p><strong>Test</strong> - This marks the start of the test definition.</p>
</div>
<div class="paragraph">
<p><strong>TestId</strong> - This provides a unique id for the test specification.</p>
</div>
<div class="paragraph">
<p><strong>TotalTests</strong> - This defines the total number of times this test is to be
executed.</p>
</div>
<div class="paragraph">
<p><strong>TestFrequency</strong> - A duration that specifies the frequency that the test should
be run e.g. PT1S is every second.</p>
</div>
<div class="paragraph">
<p><strong>GenerateEventFiles</strong> - This indicated that the events should be placed in a file
and is currently always set to true. In future there may be a different delivery
mechanism which would allow for delayed events.</p>
</div>
<div class="paragraph">
<p><strong>TestFileLocation</strong>- This is the directory where the files should be created.</p>
</div>
<div class="paragraph">
<p><strong>TestFileDestination</strong> - This directory the files should be moved to once
created.</p>
</div>
<div class="paragraph">
<p><strong>Job</strong> - This defines the start of the job definition for the test.</p>
</div>
<div class="paragraph">
<p><strong>JobSpecName</strong> - This the name of the job that is being executed.</p>
</div>
<div class="paragraph">
<p><strong>EventDefinition</strong> - This defines the start of the event definitions.</p>
</div>
<div class="paragraph">
<p>The <code>EventDefinition</code> marks the start of the block of events that are to be
reported by the simulator for the job. Each event in the event definition is
marked by <code>EventName</code> which is a comma separated list of the data to be reported
for the event. Using the following example</p>
</div>
<div class="literalblock">
<div class="content">
<pre>EventName=2,SignerReadTokenRequest,signer,signer-bc740078-0dbe-453f-96de-4a3bb9951d97,PT0S,false,1</pre>
</div>
</div>
<div class="paragraph">
<p>the definition of the comma separated list is as follows:</p>
</div>
<div class="paragraph">
<p><strong>2</strong> - The id for the event definition.</p>
</div>
<div class="paragraph">
<p><strong>SignerReadTokenRequest</strong> - The type of event that is to be generated.</p>
</div>
<div class="paragraph">
<p><strong>signer</strong> - The node that the event was generated from.</p>
</div>
<div class="paragraph">
<p><strong>signer-bc740078-0dbe-453f-96de-4a3bb9951d97</strong> - The application that generated
the event.</p>
</div>
<div class="paragraph">
<p><strong>PT0S</strong> - This will define in a delay in generating an event. This is currently
not applicable as it requires GenerateEventFiles to be set to false.</p>
</div>
<div class="paragraph">
<p><strong>false</strong> - Indicates if this is the first event in a sequence of events. If so
there will not be a previous event definition id.</p>
</div>
<div class="paragraph">
<p><strong>1</strong> - This is the previous event definition id e.g. in this event definition
with an id of 2 the previous event definition is 1.</p>
</div>
</div>
</details>
</div>
</div>
<div class="sect2">
<h3 id="_building_a_domain_with_test">Building a domain with test</h3>
<div class="paragraph">
<p>Each domain contains a set of unit tests. We will use the <code>AEReception</code> domain
to demonstrate building a domain in test mode.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a shell and navigate to the <code>AEReception</code> project directory:</p>
<div class="literalblock">
<div class="content">
<pre>cd ~/git/tower/models/AEReception   # linux/mac
cd C:\git\tower\models\AEReception  # windows</pre>
</div>
</div>
</li>
<li>
<p>Build the project in test mode with Docker by running the following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml build --no-cache</pre>
</div>
</div>
</li>
<li>
<p>Run the test schedule with Docker using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml up</pre>
</div>
</div>
<div class="paragraph">
<p>You will see a lot of output including some logs from the test runner. All of
the tests will be marked as "SUCCEEDED".</p>
</div>
</li>
<li>
<p>In BridgePoint, navigate to and open the <code>basicTest01</code> function at
<a href="images/07_basic_test.png"><code>AEReception::AERDomain::AEReception::test_cases</code></a>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There will be red error markers in this activity. This is due to the fact
that the BridgePoint editor does not expect the test scaffolding that the C++
code generator will produce. These error markers are expected.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>On line 28, change "HighOutput" to "LowOutput".</p>
</li>
<li>
<p>Export MASL by pressing the <a href="images/01_hammer.png">hammer icon</a> or
<a href="images/02_build_project.png">right-click &gt; "Build Project"</a>.</p>
</li>
<li>
<p>In the shell window, rebuild and run the tests. The following command will
cause docker to build and run all at once:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml up --build --force-recreate</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>--build</code> flag tells docker to build the image before creating the
container. The <code>--force-recreate</code> flag tells docker to provision a new container
from the latest image rather than simply restarting the container that was
already there from the previous run. Without both of these two flags, the
changes will not take effect.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Scroll up near the beginning of the output and you will see some output that
looks like the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>2022-06-13T15:15:47Z Debug : AEReception : basicTest01: FAILED
2022-06-13T15:15:47Z Debug : AEReception : Expected: 'LowInput' but got: 'HighInput'
  Stack:
  #4	Assertions::assertTrue:4
  #3	Assertions::assertEquals:3
  #2	AEReception::basicTest01:28
  #1	Test::run_test:65</pre>
</div>
</div>
<div class="paragraph">
<p>This tells us that the <code>basicTest01</code> test case failed and lets us know that an
assertion failed.</p>
</div>
</li>
<li>
<p>Clean up the docker run with the following command:</p>
<div class="literalblock">
<div class="content">
<pre>docker compose -f docker-compose.test.yml down</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-06-27 09:41:41 -0400
</div>
</div>
</body>
</html>